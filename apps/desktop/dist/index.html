<!doctype html>
<!--Copyright 2025 Anthony Lenk (owner, Path Key), Nicholas Chiaravalle (author)-->
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta
    http-equiv="Content-Security-Policy"
    content="default-src 'self' https://mypathkey.com; img-src * data: blob:; media-src * blob:; frame-src https://mypathkey.com; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline'; connect-src *"
  />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Path Key Desktop</title>
  <style>
    :root{
      --bg:#081a12; --glass:rgba(12,40,28,.92);
      --edge:#14924e; --glow:rgba(20,146,78,.45); --gold:#f2c66e;
      --bar-h:34px;
      --radius:14px;
    }
    html, body {
      height: 100%; width: 100%; margin: 0; padding: 0;
      background: var(--bg); color: var(--gold);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, sans-serif;
      overflow: hidden; /* ‚Üê no scrollbars in our UI */
    }
    .window {
      position: fixed; inset: 0;
      display: grid;
      grid-template-rows: var(--bar-h) 1fr;
      border-radius: var(--radius);
      background: var(--glass);
      -webkit-backdrop-filter: blur(10px) saturate(1.15);
              backdrop-filter: blur(10px) saturate(1.15);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.1);
    }
    /* full border ring */
    .ring {
      position: fixed; inset: 0; pointer-events: none;
      border-radius: calc(var(--radius) + 2px);
      box-shadow: 0 0 0 2px var(--edge) inset, 0 0 18px 2px var(--glow);
      outline: 1px solid rgba(0,0,0,.35); outline-offset:-1px;
    }

    .titlebar {
      display: grid;
      grid-template-columns: auto 1fr auto;
      align-items: center;
      padding: 2px 8px;
      height: var(--bar-h);
      border-bottom: 1px solid rgba(255,255,255,.12);
      box-shadow: 0 4px 14px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.08);
      color: var(--gold);
    }
    .l, .r { display: flex; gap: 6px; align-items: center; }
    .title {
      justify-self: center; font-weight: 700; letter-spacing: .15px; white-space: nowrap;
      text-shadow: 0 1px 0 rgba(0,0,0,.5);
    }

    .btn {
      width: 28px; height: 24px;
      display: inline-flex; align-items: center; justify-content: center;
      border-radius: 8px;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.12);
      color: var(--gold);
      cursor: pointer;
      transition: background .12s, transform .08s;
      box-shadow: inset 0 1px 0 rgba(255,255,255,.18), inset 0 -1px 0 rgba(0,0,0,.45);
    }
    .btn:hover { background: rgba(255,255,255,.16); }
    .btn:active { transform: translateY(1px); }
    .close:hover { background: rgba(255,60,60,.5); color: #fff; }
    .btn svg { width: 14px; height: 14px; fill: currentColor; filter: drop-shadow(0 1px 0 rgba(0,0,0,.35)); }

    .content { position: relative; }
    .site {
      position: absolute; inset: 0;
      width: 100%; height: 100%;
      border: 0; background: transparent;
    }
  </style>
</head>
<body>
  <div class="window">
    <!-- Entire bar is draggable by default -->
    <div class="titlebar" data-tauri-drag-region>
      <!-- Buttons are explicitly no-drag so they stay clickable -->
      <div class="l" data-tauri-drag-region="no-drag">
        <div class="btn" id="nav-back"    data-tauri-drag-region="no-drag" title="Back">
          <svg viewBox="0 0 24 24"><path d="M15.5 4.5a1 1 0 0 1 0 1.4L10.4 11l5.1 5.1a1 1 0 0 1-1.4 1.4l-6-6a1 1 0 0 1 0-1.4l6-6a1 1 0 0 1 1.4 0z"/></svg>
        </div>
        <div class="btn" id="nav-forward" data-tauri-drag-region="no-drag" title="Forward">
          <svg viewBox="0 0 24 24"><path d="M8.5 19.5a1 1 0 0 1 0-1.4L13.6 13 8.5 7.9a1 1 0 1 1 1.4-1.4l6 6a1 1 0 0 1 0 1.4l-6 6a1 1 0 0 1-1.4 0z"/></svg>
        </div>
        <div class="btn" id="nav-reload"  data-tauri-drag-region="no-drag" title="Reload">
          <svg viewBox="0 0 24 24"><path d="M17.65 6.35A7.95 7.95 0 0 0 12 4a8 8 0 1 0 7.64 5.5h-2.04A6 6 0 1 1 12 6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>
        </div>
      </div>

      <div class="title" data-tauri-drag-region="no-drag">Path&nbsp;Key</div>

      <div class="r" data-tauri-drag-region="no-drag">
        <div class="btn" id="win-min" data-tauri-drag-region="no-drag" title="Minimize">
          <svg viewBox="0 0 24 24"><path d="M5 12h14v1H5z"/></svg>
        </div>
        <div class="btn" id="win-max" data-tauri-drag-region="no-drag" title="Maximize/Restore">
          <svg viewBox="0 0 24 24"><path d="M5 5h14v14H5z"/></svg>
        </div>
        <div class="btn close" id="win-close" data-tauri-drag-region="no-drag" title="Close">
          <svg viewBox="0 0 24 24"><path d="M6.4 5l5.6 5.6L17.6 5l1.4 1.4L13.4 12l5.6 5.6-1.4 1.4L12 13.4 6.4 19l-1.4-1.4L10.6 12 5 6.4z"/></svg>
        </div>
      </div>
    </div>

    <div class="content">
      <iframe class="site" id="site"
        src="https://mypathkey.com"
        allow="clipboard-read; clipboard-write; fullscreen; geolocation; microphone; camera">
      </iframe>
    </div>
  </div>

  <div class="ring" aria-hidden="true"></div>

  <script>
    // Tauri v2: global is window.__TAURI__.core
    const invoke = (cmd, payload) => window.__TAURI__?.core?.invoke(cmd, payload);

    // Page controls target the iframe we own.
    const site = document.getElementById('site');
    document.getElementById('nav-back')   .addEventListener('click', () => site.contentWindow?.history.back());
    document.getElementById('nav-forward').addEventListener('click', () => site.contentWindow?.history.forward());
    document.getElementById('nav-reload') .addEventListener('click', () => site.contentWindow?.location.reload());

    // Window controls use a Tauri command.
    document.getElementById('win-min')  .addEventListener('click', () => invoke('window_action', { action: 'min' }));
    document.getElementById('win-max')  .addEventListener('click', () => invoke('window_action', { action: 'max' }));
    document.getElementById('win-close').addEventListener('click', () => invoke('window_action', { action: 'close' }));
  </script>
</body>
</html>
